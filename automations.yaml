- id: '1584913993330'
  alias: Bathroom Vent/Fan
  description: ''
  trigger:
  - above: '95'
    entity_id: sensor.bathroom_humid
    for:
      hours: 0
      minutes: 2
      seconds: 0
    platform: numeric_state
    id: 'on'
  - entity_id: sensor.bathroom_humid
    for:
      hours: 0
      minutes: 1
      seconds: 0
    platform: numeric_state
    id: 'off'
    below: 89
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'off'
      - condition: state
        entity_id: switch.bathroom_fan
        state: 'on'
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.bathroom_fan
    - conditions:
      - condition: trigger
        id: 'on'
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.bathroom_fan
  mode: single
- id: '1611147472037'
  alias: Snooze Alarm
  description: ''
  trigger:
  - platform: event
    event_type: shortcut_event
    event_data:
      actionname: snooze-alarm
  condition: []
  action:
  - service: light.turn_on
    target:
      entity_id: light.bed_wled
    data:
      effect: solid
      rgb_color:
      - 0
      - 0
      - 0
  - service: light.turn_on
    data:
      effect: Sunrise
    target:
      entity_id: light.bed_wled
  - service: number.set_value
    target:
      entity_id: number.bed_wled_intensity
    data:
      value: '120'
  - service: number.set_value
    target:
      entity_id: number.bed_wled_speed
    data:
      value: '5'
  mode: single
- id: '1614888725831'
  alias: record cumulative rain to midnight
  description: ''
  trigger:
  - platform: time_pattern
    hours: '00'
    minutes: '00'
    seconds: '01'
  condition: []
  action:
  - service: mqtt.publish
    data:
      topic: ha/cum_rain_prior
      retain: true
      payload_template: '{{ states(''sensor.pws_5in1_total_rain'') }}'
  mode: single
- id: '1639314659508'
  alias: outside christmas tree on
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: '0'
  condition: []
  action:
  - service: homeassistant.turn_on
    data: {}
    target:
      entity_id: switch.esp10
  mode: single
- id: '1639314713123'
  alias: outside christmas tree off
  description: ''
  trigger:
  - platform: sun
    event: sunrise
    offset: '0'
  condition: []
  action:
  - service: homeassistant.turn_off
    data: {}
    target:
      entity_id: switch.esp10
  mode: single
- id: '1641653770665'
  alias: alert-ack-home
  description: ''
  trigger:
  - platform: state
    entity_id: person.ryan
    from: not_home
    to: home
  condition: []
  action:
  - service: alert.turn_on
    data:
      entity_id: '{{ states.alert|selectattr(''state'',''eq'',''off'')|map(attribute=''entity_id'')|join('','')
        }}

        '
  - service: automation.turn_off
    target:
      entity_id:
      - automation.alert_ack_home
  mode: single
- id: '1641654143724'
  alias: alert-ack-morn
  description: ''
  trigger:
  - platform: state
    entity_id: sensor.fry_battery_state
    from: Charging
    to: Not Charging
  condition:
  - condition: time
    after: 05:00:00
    before: '11:00:00'
  action:
  - service: alert.turn_on
    data:
      entity_id: '{{ states.alert|selectattr(''state'',''eq'',''off'')|map(attribute=''entity_id'')|join('','')
        }}

        '
  - service: automation.turn_off
    target:
      entity_id: automation.alert_ack_morn
  mode: single
- id: '1643123848197'
  alias: Node Red is dead
  description: ''
  trigger:
  - platform: state
    entity_id: input_boolean.node_red_status
    for:
      hours: 0
      minutes: 5
      seconds: 0
  condition: []
  action:
  - service: input_boolean.turn_on
    target:
      entity_id: input_boolean.node_red_dead
  mode: single
- id: '1643221820085'
  alias: Tag chicken_feed is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 0921efce-ba6f-424a-a388-8980017719fc
  condition: []
  action:
  - service: input_datetime.set_datetime
    target:
      entity_id: input_datetime.chicken_last_feed
    data:
      timestamp: '{{ now().timestamp() }}'
  mode: single
- id: '1643221841875'
  alias: Tag chicken_eggs is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: f0cd9b85-9025-47f9-b951-b0710160b686
  condition: []
  action:
  - service: input_datetime.set_datetime
    target:
      entity_id: input_datetime.chicken_last_eggs
    data:
      timestamp: '{{ now().timestamp() }}'
  mode: single
- id: '1643221855990'
  alias: Tag chicken_water is scanned
  description: ''
  trigger:
  - platform: tag
    tag_id: 488a6b96-4fe3-4521-a63e-d40b9b552e33
  condition: []
  action:
  - service: input_datetime.set_datetime
    data:
      timestamp: '{{ now().timestamp() }}'
    target:
      entity_id: input_datetime.chicken_last_water
  - service: input_boolean.turn_off
    target:
      entity_id: input_boolean.chickens_need_watering
  mode: single
- id: '1643722988108'
  alias: Climate - Turn off upstairs heat after 2 hours
  description: ''
  trigger:
  - platform: template
    value_template: '{{ is_state(''climate.bed_room'', ''heat'') or is_state(''climate.bed_room'',
      ''unavailable'') }}'
    for:
      hours: 2
  - platform: template
    value_template: '{{ is_state(''climate.craft_room'', ''heat'') or is_state(''climate.craft_room'',
      ''unavailable'') }}'
    for:
      hours: 2
  condition: []
  action:
  - wait_template: '{{ is_state(''light.sengled_e11_g13_035c3bc7_1'', ''off'')}}'
    continue_on_timeout: false
  - service: climate.turn_off
    target:
      entity_id:
      - climate.bed_room
      - climate.craft_room
    data: {}
  mode: parallel
  max: 10
- id: '1652207706173'
  alias: Reset RTL
  description: ''
  trigger:
  - platform: state
    entity_id: alert.weather_station
    to: 'on'
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition: []
  action:
  - service: hassio.addon_restart
    data:
      addon: 9b13b3f4_rtl433
  mode: single
- id: '1657802534737'
  alias: Climate - Craft Room Cool - On
  description: ''
  trigger:
  - platform: template
    value_template: '{{states.climate.craft_room.attributes.current_temperature >
      states.climate.craft_room.attributes.temperature}}'
    for:
      minutes: 5
  condition:
  - condition: device
    device_id: a71a54da1e80ae275a69e54383eb20ed
    domain: climate
    entity_id: bab6cfb92b760c2510616faead126007
    type: is_hvac_mode
    hvac_mode: 'off'
  action:
  - device_id: a71a54da1e80ae275a69e54383eb20ed
    domain: climate
    entity_id: bab6cfb92b760c2510616faead126007
    type: set_hvac_mode
    hvac_mode: cool
  mode: single
- id: '1657809251650'
  alias: UPS Turn Off lights after blip
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.ups_trap
    to: 'UPS: No longer on battery power.'
  - platform: state
    entity_id:
    - sensor.ups_status_data
    from: OB
    to: OL
    for:
      hours: 0
      minutes: 0
      seconds: 55
  condition: []
  action:
  - service: homeassistant.turn_off
    data: {}
    target:
      entity_id:
      - light.sengled_e11_g13_035cb3f8_1
      - light.sengled_e11_g13_035c3bc7_1
      - light.bed_wled
      - light.wink_bed_room
      - light.wink_led_strip_bath
  - delay:
      hours: 0
      minutes: 0
      seconds: 30
      milliseconds: 0
  - service: homeassistant.turn_off
    data: {}
    target:
      entity_id:
      - light.sengled_e11_g13_035cb3f8_1
      - light.sengled_e11_g13_035c3bc7_1
      - light.bed_wled
      - light.wink_bed_room
      - light.wink_led_strip_bath
  - delay:
      hours: 0
      minutes: 0
      seconds: 59
      milliseconds: 0
  - service: media_player.turn_off
    data: {}
    target:
      entity_id:
      - media_player.lg_webos_tv_nano80upa
      - media_player.lg_webos_tv_5a6f
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.sonoff_4ch_relay_4
  mode: single
- id: '1665668429834'
  alias: Door Alerts v2
  description: ''
  trigger:
  - platform: state
    entity_id: binary_sensor.garage_entry_door, binary_sensor.wink_front_door_opened,
      binary_sensor.wink_back_door_opened, binary_sensor.basement_door, binary_sensor.front_door
    to: 'on'
  condition:
  - condition: numeric_state
    entity_id: zone.home
    above: 0
    value_template: '{{ float(state.state) }}'
    enabled: false
  action:
  - wait_template: '{% set new = trigger.entity_id %} {{ is_state(new, ''off'') }}

      '
    timeout: 00:00:10
  - service: notify.telegram_ryan
    data:
      message: "{% set new = trigger.entity_id %} {% if is_state(new, 'off') %}\n
        \ {{ trigger.to_state.name }} was opened and closed.\n{% else %}\n  {{ trigger.to_state.name
        }} was opened.\n{% endif %}\n"
  - condition: template
    value_template: '{% set new = trigger.entity_id %} {{ is_state(new, ''on'') }}

      '
  - wait_template: '{% set new = trigger.entity_id %} {{ is_state(new, ''off'') }}

      '
  - service: notify.telegram_ryan
    data:
      message: '{{ trigger.to_state.name }} was closed.

        '
  mode: parallel
  max: 10
- id: '1665711480975'
  alias: Climate -  Auto Craft Cool
  description: ''
  trigger:
  - platform: template
    value_template: '{{states.climate.craft_room.attributes.current_temperature >
      states.climate.craft_room.attributes.temperature +2 or states.climate.craft_room.attributes.current_temperature
      <= states.climate.craft_room.attributes.temperature}}'
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.craft_room
      state: heat
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{states.climate.craft_room.attributes.current_temperature
          <= states.climate.craft_room.attributes.temperature}}'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.craft_room
    - conditions:
      - condition: template
        value_template: '{{states.climate.craft_room.attributes.current_temperature
          > states.climate.craft_room.attributes.temperature+2}}'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: cool
        target:
          entity_id: climate.craft_room
  mode: single
- id: '1665711964366'
  alias: Climate - Auto Office Heat
  description: ''
  trigger:
  - platform: template
    value_template: '{{states.climate.bed_room.attributes.current_temperature > states.climate.bed_room.attributes.temperature
      or states.climate.bed_room.attributes.current_temperature < states.climate.bed_room.attributes.temperature-1}}

      '
    for:
      minutes: 5
  condition: []
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{states.climate.bed_room.attributes.current_temperature
          < states.climate.bed_room.attributes.temperature-1}}'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: heat
        target:
          entity_id:
          - climate.bed_room
    - conditions:
      - condition: template
        value_template: '{{states.climate.bed_room.attributes.current_temperature
          > states.climate.bed_room.attributes.temperature}}'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id:
          - climate.bed_room
  mode: single
- id: '1665712050949'
  alias: Climate - Auto Craft Heat
  description: ''
  trigger:
  - platform: template
    value_template: '{{states.climate.craft_room.attributes.current_temperature >
      states.climate.craft_room.attributes.temperature or states.climate.craft_room.attributes.current_temperature
      < states.climate.craft_room.attributes.temperature-1}}

      '
    for:
      minutes: 5
  condition: []
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{states.climate.craft_room.attributes.current_temperature
          < states.climate.craft_room.attributes.temperature-1}}'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: heat
        target:
          entity_id: climate.craft_room
    - conditions:
      - condition: template
        value_template: '{{states.climate.craft_room.attributes.current_temperature
          > states.climate.craft_room.attributes.temperature}}'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id: climate.craft_room
  mode: single
- id: '1666117827132'
  alias: upstairs dimmer
  description: ''
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      device_id: 50b370ca9c6b4fcf91f0fee0cb747b7b
      command: move_to_level_with_on_off
  condition: []
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data.params.level <= 5}}'
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id:
          - light.sengled_e11_g13_035cb3f8_1
          - light.sengled_e11_g13_035c3bc7_1
    default:
    - service: switch.turn_on
      data: {}
      target:
        entity_id:
        - switch.outlet_1
        - switch.desk_power_strip_1
    - service: light.turn_on
      data:
        brightness: '{{trigger.event.data.params.level | int}}'
        transition: 1
      target:
        entity_id:
        - light.sengled_e11_g13_035c3bc7_1
        - light.sengled_e11_g13_035cb3f8_1
  mode: restart
- id: '1666123844519'
  alias: bed light dimmer
  description: ''
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      unique_id: ff:ff:00:0f:e7:fd:89:a4:1:0x0008
  condition: []
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data.params.level == 2}}'
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.bed_wled
    default:
    - service: light.turn_on
      data:
        brightness: '{{trigger.event.data.params.level | int}}'
        transition: 1
      target:
        entity_id:
        - light.bed_wled
  mode: restart
- id: '1667065340558'
  alias: HCPSS Status Changes
  description: ''
  trigger:
  - platform: state
    not_from:
    - 'null'
    - unavailable
    not_to:
    - unavailale
    entity_id:
    - sensor.hcps_status
  condition: []
  action:
  - service: notify.telegram_group
    data:
      message: '✏HCPSS is: {{trigger.to_state.state}}✏'
  mode: single
- id: '1667065431239'
  alias: Blue Iris Status
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.blueiris
  condition: []
  action:
  - service: notify.telegram_ryan
    data:
      message: "\U0001F4F9Blue Iris: {{trigger.to_state.state}}\U0001F4F9"
  mode: single
- id: '1667183802979'
  alias: Hot Water
  description: ''
  trigger:
  - platform: time
    at: 08:00:00
    id: 'off'
  - platform: time
    at: '17:00:00'
    id: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'off'
      - condition: and
        conditions:
        - condition: state
          entity_id: input_boolean.house_guest
          state: 'off'
        - condition: state
          entity_id: switch.wink_zwaveoutlet
          state: 'on'
        - condition: state
          entity_id: zone.home
          state: '0'
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.wink_zwaveoutlet
    - conditions:
      - condition: trigger
        id: 'on'
      - condition: state
        entity_id: switch.wink_zwaveoutlet
        state: 'off'
      - condition: state
        state: 'off'
        entity_id: input_boolean.vacation_mode
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.wink_zwaveoutlet
  mode: single
- id: '1667185001857'
  alias: Vacation Lights
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: -00:38:00
    id: living room on
  - platform: sun
    event: sunset
    offset: +01:00:00
    id: living room off
  - platform: sun
    event: sunset
    offset: +01:40:00
    id: bed room on
  - platform: sun
    event: sunset
    offset: +03:25:00
    id: bed room off
  condition:
  - condition: state
    entity_id: input_boolean.vacation_mode
    state: 'on'
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: living room on
      sequence:
      - service: homeassistant.turn_on
        data: {}
        target:
          entity_id: switch.wink_hallway_switch
    - conditions:
      - condition: trigger
        id: living room off
      sequence:
      - service: homeassistant.turn_off
        data: {}
        target:
          entity_id: switch.wink_hallway_switch
    - conditions:
      - condition: trigger
        id: bed room on
      sequence:
      - service: homeassistant.turn_on
        data: {}
        target:
          entity_id:
          - light.wink_bed_room
          - switch.relay1
    - conditions:
      - condition: trigger
        id: bed room off
      sequence:
      - service: homeassistant.turn_off
        data: {}
        target:
          entity_id: light.wink_bed_room
  mode: single
- id: '1667185720938'
  alias: No one is home , turn the lights on
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 0
  condition:
  - condition: state
    entity_id: input_boolean.house_guest
    state: 'off'
  - condition: state
    entity_id: input_boolean.vacation_mode
    state: 'off'
  - condition: state
    entity_id: zone.home
    state: '0'
  action:
  - service: homeassistant.turn_on
    data: {}
    target:
      entity_id:
      - switch.wink_front_porch_switch
      - switch.ahr_085_2_relay2
      - switch.ahr_085_2_relay1
      - switch.wink_hallway_switch
  - service: notify.telegram_group
    data:
      message: No one is home so i turned on some lights
  mode: single
- id: '1668793611494'
  alias: Wallpanel Battery Management
  description: ''
  use_blueprint:
    path: seamus65/wallpanel-battery-management.yaml
    input:
      battery: sensor.galtab_browser_battery
      charger: switch.centralite_3210_l_0ca5e10a_1
- id: '1668960233718'
  alias: wood stove blower
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.esp7
    to: 'on'
  condition: []
  action:
  - delay: '{{ states(''input_number.woodstove_timer'') | multiply(60) | int }}'
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.esp7
  mode: restart
- id: '1668982954413'
  alias: Sunset/Sunrise
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 0
    id: sunset
  - platform: sun
    event: sunrise
    id: sunrise
    offset: '30'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: sunset
      sequence:
      - service: light.turn_on
        data:
          color_name: red
          brightness: 1
        target:
          entity_id: light.wink_led_strip_bath
      - service: homeassistant.turn_on
        data: {}
        target:
          entity_id:
          - group.outdoor_lights
          - switch.wink_front_porch_switch
    - conditions:
      - condition: trigger
        id: sunrise
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id: light.wink_led_strip_bath
      - service: homeassistant.turn_off
        data: {}
        target:
          entity_id:
          - switch.wink_front_porch_switch
          - group.outdoor_lights
  mode: single
- id: '1668999676802'
  alias: Bath Lights
  description: ''
  trigger:
  - platform: state
    entity_id:
    - light.wink_led_strip_bath
    to: 'on'
    from: unavailable
  condition:
  - condition: sun
    before: sunrise
    after: sunset
  - condition: not
    conditions:
    - condition: state
      entity_id: light.wink_led_strip_bath
      attribute: rgb_color
      state: 255, 0, 0
  action:
  - service: light.turn_on
    data:
      color_name: red
    target:
      entity_id: light.wink_led_strip_bath
  mode: single
- id: '1669078704899'
  alias: 3dprinter turn off
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.octoprint_printing
    to: 'off'
    for:
      hours: 0
      minutes: 20
      seconds: 0
    from: 'on'
  condition: []
  action:
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.3d_printer
  mode: single
- id: '1669146356392'
  alias: Climate upstairs turn off with light
  description: ''
  trigger:
  - platform: state
    entity_id:
    - light.sengled_e11_g13_035cb3f8_1
    to: 'off'
    from: 'on'
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition:
  - condition: sun
    before: sunrise
    after: sunset
    enabled: false
  action:
  - service: climate.turn_off
    target:
      entity_id:
      - climate.bed_room
      - climate.craft_room
    data: {}
  mode: parallel
  max: 10
- id: '1669751419866'
  alias: keep certain switches on
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.driveway_outlets
    to: 'off'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  - platform: state
    entity_id:
    - switch.sonoff_4ch_relay_4
    to: 'off'
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition: []
  action:
  - delay:
      hours: 0
      minutes: 0
      seconds: 10
      milliseconds: 0
  - service: switch.turn_on
    data: {}
    target:
      entity_id:
      - switch.driveway_outlets
      - switch.sonoff_4ch_relay_4
  mode: single
- id: '1671853638567'
  alias: Esp11 restore
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.esp11
  condition: []
  action:
  - type: turn_on
    device_id: fbf6496ae84f8cee7e76a266df688a46
    entity_id: switch.esp11
    domain: switch
  mode: single
- id: '1674051285239'
  alias: Chicken - Egg Helper- Light
  description: ''
  trigger:
  - platform: sun
    event: sunrise
    offset: -01:00:00
  condition: []
  action:
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.sonoff_4ch_relay_2
  mode: single
- id: '1674312143783'
  alias: Air compressor purge auto off
  description: ''
  trigger:
  - platform: device
    type: turned_on
    device_id: 183e4d2b4ff3b11f051389546588444d
    entity_id: switch.sonoff_b_1_relay
    domain: switch
    for:
      hours: 0
      minutes: 0
      seconds: 10
  condition: []
  action:
  - type: turn_off
    device_id: 183e4d2b4ff3b11f051389546588444d
    entity_id: switch.sonoff_b_1_relay
    domain: switch
  mode: single
- id: '1675108306097'
  alias: Garage - Opened turn on garage lights
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.garage_entry_door
    from: 'off'
    to: 'on'
  - platform: state
    entity_id:
    - cover.rat_firstbay_11e249_door
    - cover.rat_thirdbay_11d3bf_door
    - cover.rat_secondbay_fad96e_door
    from: closed
    to: opening
  condition: []
  action:
  - service: light.turn_on
    data: {}
    target:
      entity_id: light.garage_lights_front
  - service: timer.start
    data:
      duration: 00:10:00
    target:
      entity_id: timer.garage_lights
  mode: single
- id: '1675444247548'
  alias: Laundry on
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.laundry_door_alarm_level
    to: '255'
    id: open
  - platform: state
    entity_id:
    - sensor.laundry_door_alarm_level
    to: '0'
    id: close
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: open
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id: switch.in_wall_paddle_switch_500s
    - conditions:
      - condition: trigger
        id: close
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id: switch.in_wall_paddle_switch_500s
  mode: single
- id: '1675694589234'
  alias: Chicken Water
  description: ''
  trigger:
  - platform: sun
    event: sunrise
    offset: 0
  - platform: time
    at: '10:00:00'
    id: '10'
  - platform: state
    entity_id:
    - switch.side_spigot
    to: 'on'
  condition:
  - condition: state
    entity_id: switch.bathroom_fan
    state: unavailable
  action:
  - if:
    - condition: state
      entity_id: input_boolean.chicken_water_automations
      state: 'off'
    - condition: state
      entity_id: switch.side_spigot
      state: 'on'
    then:
    - service: notify.telegram_group
      data:
        message: Chicken Water Automation Disabled - Please remember to turn off water
    - stop: Disabled
  - if:
    - condition: state
      entity_id: switch.side_spigot
      state: unavailable
    then:
    - service: notify.telegram_group
      data:
        message: Chicken Water Automation - Spigot is unavailable
    - service: homeassistant.turn_on
      data: {}
      target:
        entity_id: input_boolean.chickens_need_watering
    - stop: Spigot Unavailable
  - if:
    - condition: state
      entity_id: input_boolean.chicken_water_automations
      state: 'off'
    then:
    - service: homeassistant.turn_on
      data: {}
      target:
        entity_id: input_boolean.chickens_need_watering
    - stop: Disabled
  - if:
    - condition: and
      conditions:
      - condition: numeric_state
        entity_id: sensor.pws_5in1_temperature
        below: 32.1
    then:
    - if:
      - condition: trigger
        id: '10'
      then:
      - service: homeassistant.turn_on
        data: {}
        target:
          entity_id: input_boolean.chickens_need_watering
    - stop: Too Cold.
  - service: notify.telegram_group
    data:
      message: Filling the Watering Hole
  - service: switch.turn_on
    data: {}
    target:
      entity_id: switch.side_spigot
  - delay:
      hours: 0
      minutes: 0
      seconds: 50
      milliseconds: 0
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.side_spigot
  - service: automation.trigger
    data:
      skip_condition: true
    target:
      entity_id: automation.tag_chicken_water_is_scanned
  - service: notify.telegram_group
    data:
      message: The Watering Hole Is Full
  mode: single
- id: '1675973315311'
  alias: wall panel tablet
  description: ''
  trigger:
  - platform: time
    at: '23:00:00'
    id: 'off'
  - platform: state
    entity_id:
    - group.device_family
    to: home
    id: 'on'
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: 'off'
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id:
          - light.fire_screen
          - light.galtab_screen
    - conditions:
      - condition: trigger
        id: 'on'
      sequence:
      - service: light.turn_on
        data: {}
        target:
          entity_id:
          - light.galtab_screen
          - light.fire_screen
  mode: single
- id: '1676037938048'
  alias: 3D print is done
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.octoprint_job_percentage
    to: '100'
  condition: []
  action:
  - service: notify.telegram_ryan
    data:
      message: 3D Print is done!!
  mode: single
- id: '1676429256085'
  alias: Bed Room Dimmer
  description: ''
  trigger:
  - platform: event
    event_type: zha_event
    event_data:
      unique_id: ff:ff:00:0f:e7:fd:72:1f:1:0x0008
  condition: []
  action:
  - if:
    - condition: state
      entity_id: switch.relay1
      state: 'off'
    then:
    - service: switch.turn_on
      data: {}
      target:
        entity_id: switch.relay1
  - choose:
    - conditions:
      - condition: template
        value_template: '{{trigger.event.data.params.level == 2}}'
      sequence:
      - service: light.turn_off
        data: {}
        target:
          entity_id:
          - light.wink_bed_room
    default:
    - service: light.turn_on
      data:
        brightness: '{{trigger.event.data.params.level | int}}'
        transition: 1
      target:
        entity_id:
        - light.wink_bed_room
  mode: restart
- id: '1677241964532'
  alias: Turn lights off at sunrise
  description: ''
  trigger:
  - platform: sun
    event: sunrise
    offset: +00:45:00
  condition: []
  action:
  - service: homeassistant.turn_off
    data: {}
    target:
      entity_id: group.outdoor_lights
  - condition: numeric_state
    entity_id: zone.home
    below: 1
  - service: homeassistant.turn_off
    data: {}
    target:
      entity_id: group.indoor_lights
  mode: single
- id: '1678291560795'
  alias: Coming Home / Away
  description: ''
  trigger:
  - platform: numeric_state
    entity_id: zone.home
    for:
      hours: 0
      minutes: 5
      seconds: 0
    above: 0
    id: turn on
  - platform: numeric_state
    entity_id: zone.home
    for:
      hours: 0
      minutes: 5
      seconds: 0
    id: turn off
    below: 1
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id: turn on
      sequence:
      - service: homeassistant.turn_on
        data: {}
        target:
          entity_id: input_boolean.coming_home_helper
    - conditions:
      - condition: trigger
        id: turn off
      sequence:
      - service: homeassistant.turn_off
        data: {}
        target:
          entity_id: input_boolean.coming_home_helper
  mode: single
- id: '1682390387556'
  alias: Brett Breath
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.breath_alarm
    to: 'on'
  condition: []
  action:
  - service: light.turn_on
    data: {}
    target:
      entity_id:
      - light.wink_bed_room
      - light.bed_wled
  mode: single
- id: '1684260682049'
  alias: my ip changes
  description: ''
  trigger:
  - platform: state
    entity_id:
    - sensor.myip
  condition: []
  action:
  - service: notify.telegram_ryan
    data:
      message: 'IP changed from: {{trigger.from_state.state}}  to {{trigger.to_state.state}}'
  mode: single
- id: '1688228439218'
  alias: Send Message when no one is home but a door was opened v3
  description: ''
  trigger:
  - platform: state
    entity_id:
    - binary_sensor.garage_entry_door
    - binary_sensor.wink_back_door_opened
    - binary_sensor.front_door
    - binary_sensor.basement_door
    to: 'on'
  - platform: state
    entity_id:
    - cover.rat_thirdbay_11d3bf_door
    - cover.rat_secondbay_fad96e_door
    - cover.rat_firstbay_11e249_door
    to: open
    for:
      hours: 0
      minutes: 1
      seconds: 0
  condition:
  - condition: state
    entity_id: zone.home
    state: '0'
  action:
  - wait_template: '{% set new = trigger.entity_id %} {{ is_state(new, ''off'') }}

      '
    timeout: 00:00:05
  - service: notify.everyone_group
    data:
      message: "{% set new = trigger.entity_id %} {% if is_state(new, 'off') %}\n
        \ No one is home and {{ trigger.to_state.name }} was opened and closed.\n{%
        else %}\n  No one is home and {{ trigger.to_state.name }} was opened.\n{%
        endif %}\n"
  - condition: template
    value_template: '{% set new = trigger.entity_id %} {{ is_state(new, ''on'') }}

      '
  - wait_template: '{% set new = trigger.entity_id %} {{ is_state(new, ''off'') }}

      '
  - service: notify.everyone_group
    data:
      message: 'No one is home and {{ trigger.to_state.name }} was closed

        '
  mode: parallel
  max: 10
- id: '1688688970200'
  alias: Climate - Auto Office Cool
  description: ''
  trigger:
  - platform: template
    value_template: '{{states.climate.bed_room.attributes.current_temperature+2 >
      states.climate.bed_room.attributes.temperature or states.climate.bed_room.attributes.current_temperature
      <= states.climate.bed_room.attributes.temperature}}

      '
    for:
      hours: 0
      minutes: 10
      seconds: 0
  condition:
  - condition: not
    conditions:
    - condition: state
      entity_id: climate.bed_room
      state: heat
  action:
  - choose:
    - conditions:
      - condition: template
        value_template: '{{states.climate.bed_room.attributes.current_temperature
          < states.climate.bed_room.attributes.temperature}}'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: 'off'
        target:
          entity_id:
          - climate.bed_room
    - conditions:
      - condition: template
        value_template: '{{states.climate.bed_room.attributes.current_temperature+2
          > states.climate.bed_room.attributes.temperature}}'
      sequence:
      - service: climate.set_hvac_mode
        data:
          hvac_mode: cool
        target:
          entity_id:
          - climate.bed_room
  mode: single
- id: '1696794529178'
  alias: Pumpkin window ligts
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: 0
    id: turn_on
  - platform: time
    at: 00:00:00
    id: turn_off
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - turn_on
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id:
          - switch.esp10
          - switch.esp12
    - conditions:
      - condition: trigger
        id:
        - turn_off
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id:
          - switch.esp10
          - switch.esp12
  mode: single
- id: '1698197021513'
  alias: Wake up Alarm - turn on lights - new
  description: ''
  trigger:
  - platform: template
    value_template: '{{ states.sensor.time.state == states.sensor.alarm_time.state
      }}'
  condition:
  - condition: state
    entity_id: input_boolean.alarm_on
    state: 'on'
  - condition: state
    entity_id: sun.sun
    state: below_horizon
  - condition: template
    value_template: '{{ states.sensor.time.state >= states.sensor.alarm_time.state
      }}'
  - condition: or
    conditions:
    - condition: template
      value_template: '{{ (now().strftime("%a") == "Mon") and (states.input_boolean.alarm_mon.state=="on")}}'
    - condition: template
      value_template: '{{ (now().strftime("%a") == "Tue") and (states.input_boolean.alarm_tue.state=="on")}}'
    - condition: template
      value_template: '{{ (now().strftime("%a") == "Wed") and (states.input_boolean.alarm_wed.state=="on")}}'
    - condition: template
      value_template: '{{ (now().strftime("%a") == "Thu") and (states.input_boolean.alarm_thur.state=="on")}}'
    - condition: template
      value_template: '{{ (now().strftime("%a") == "Fri") and (states.input_boolean.alarm_fri.state=="on")}}'
    - condition: template
      value_template: '{{ (now().strftime("%a") == "Sat") and (states.input_boolean.alarm_sat.state=="on")}}'
    - condition: template
      value_template: '{{ (now().strftime("%a") == "Sun") and (states.input_boolean.alarm_sun.state=="on")}}'
  action:
  - service: homeassistant.turn_on
    data: {}
    target:
      entity_id:
      - light.jasco_products_14294_in_wall_smart_dimmer_level
  mode: single
  initial_state: true
- id: '1700657413066'
  alias: barn light night
  description: ''
  trigger:
  - platform: time
    at: '21:00:00'
  - platform: time
    at: '22:00:00'
  condition:
  - condition: numeric_state
    entity_id: zone.home
    above: 1
  action:
  - service: switch.turn_off
    data: {}
    target:
      entity_id: switch.ahr_085_2_relay2
  mode: single
- id: '1702473646649'
  alias: Power out reset
  description: ''
  trigger:
  - platform: time
    at: '10:00:00'
  condition: []
  action:
  - service: homeassistant.turn_on
    data: {}
    target:
      entity_id:
      - switch.desk_power_strip_2
      - switch.desk_power_strip_3
      - switch.desk_power_strip_4
      - switch.hp_printer
      - switch.outlet_2
      - switch.outlet_3
      - switch.switch_4
      - switch.switch_3
      - switch.ahr_085_3_relay1
      - switch.ahr_085_3_relay2
      - switch.ahr_085_3_relay3
  mode: single
- id: '1703035164626'
  alias: Megatree
  description: ''
  trigger:
  - platform: sun
    event: sunset
    offset: '-30'
    id: turn_on
  - platform: time
    at: 00:00:00
    id: turn_off
  condition: []
  action:
  - choose:
    - conditions:
      - condition: trigger
        id:
        - turn_on
      sequence:
      - service: switch.turn_on
        data: {}
        target:
          entity_id:
          - switch.esp10
    - conditions:
      - condition: trigger
        id:
        - turn_off
      sequence:
      - service: switch.turn_off
        data: {}
        target:
          entity_id:
          - switch.esp10
  mode: single
- id: '1703775125209'
  alias: chandler bi
  description: ''
  trigger:
  - platform: time
    at: '21:00:00'
  - platform: state
    entity_id:
    - alert.blue_iris_chandler_running
  condition:
  - condition: time
    after: '21:00:00'
    before: 09:00:00
  action:
  - service: alert.turn_off
    data: {}
    target:
      entity_id: alert.blue_iris_chandler_running
  mode: single
- id: '1704411488108'
  alias: Chicken heater fan
  description: ''
  trigger:
  - platform: homeassistant
    event: start
  condition: []
  action:
  - choose:
    - conditions:
      - condition: state
        entity_id: sensor.season
        state: winter
      sequence:
      - service: climate.set_hvac_mode
        metadata: {}
        data:
          hvac_mode: heat
        target:
          entity_id: climate.chicken_water_heater
  mode: single
- id: '1712956046576'
  alias: Ryan Headed home
  description: ''
  trigger:
  - platform: zone
    entity_id: person.ryan
    zone: zone.thales
    event: leave
  condition:
  - condition: time
    after: '14:00:00'
    before: '20:00:00'
  action:
  - service: notify.everyone_group
    metadata: {}
    data:
      message: "\U0001F697 Ryan, your drive time is {{ states.sensor.waze_device_ryan_to_home.state
        }} minutes taking {{ state_attr('sensor.waze_device_ryan_to_home', 'route')
        }}. Drive safe\U0001F697"
  mode: single
- id: '1712957154301'
  alias: Chelsea Headed Home
  description: ''
  trigger:
  - platform: zone
    entity_id: person.chelsea
    zone: zone.waterloo
    event: leave
  condition:
  - condition: time
    after: '13:00:00'
    before: '20:00:00'
  action:
  - service: notify.everyone_group
    metadata: {}
    data:
      message: "\U0001F697 Chelsea, your drive time is {{ states.sensor.waze_chelsea_to_home.state
        }} minutes taking {{ state_attr('sensor.waze_chelsea_to_home', 'route') }}.
        Drive safe\U0001F697"
  mode: single
- id: '1713203767357'
  alias: Garage Send Message when chelsea left but garage door is still open
  description: ''
  trigger:
  - platform: state
    entity_id: person.chelsea
    to: not_home
    for:
      minutes: 10
  condition:
  - condition: or
    conditions:
    - condition: state
      entity_id: cover.rat_firstbay_11e249_door
      state: open
  action:
  - service: notify.telegram_ryan
    data:
      title: Chelsea Left
      message: First Bay was left open
  mode: single
- id: '1714482903010'
  alias: 'Turn off side spigot when it goes unavailable '
  description: ''
  trigger:
  - platform: state
    entity_id:
    - switch.side_spigot
    from: unavailable
    to: 'on'
  condition: []
  action:
  - service: switch.turn_off
    metadata: {}
    data: {}
    target:
      entity_id: switch.side_spigot
  mode: single
- id: '1714482990730'
  alias: Keep Things Switched On
  description: ''
  trigger:
  - platform: homeassistant
    event: start
  - platform: template
    value_template: "{{ label_entities(\"Always On\") | select('is_state', 'off')
      | list | count\n      != 0 }}"
  condition: []
  action:
  - service: switch.turn_on
    metadata: {}
    data: {}
    target:
      label_id: power_on_after_outage
  mode: single
